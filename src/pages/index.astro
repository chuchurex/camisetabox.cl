---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import { products } from '../lib/supabase';
---

<Layout title="Mystery Box de Camisetas">
  <Navbar />
  
  <main>
    <!-- Hero Section -->
    <section class="relative min-h-[80vh] flex items-center overflow-hidden">
      <!-- Background Image with Overlay -->
      <div class="absolute inset-0 z-0">
        <img 
          src="/hero.png" 
          alt="Mystery Box Background" 
          class="w-full h-full object-cover opacity-60 scale-105"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-background via-background/40 to-transparent"></div>
      </div>

      <div class="container mx-auto px-4 relative z-10 text-center md:text-left">
        <div class="max-w-3xl">
          <h1 class="text-6xl md:text-8xl font-bold mb-6 leading-none">
            LA EMOCIÓN DEL <br/>
            <span class="text-accent">MISTERIO</span>
          </h1>
          <p class="text-xl md:text-2xl text-gray-300 mb-10 max-w-xl font-medium">
            Recibe en tu casa camisetas de fútbol 100% originales. Sin copias, solo pasión.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
            <a 
              href="#cajas" 
              class="bg-accent hover:bg-red-600 text-white px-10 py-5 rounded-full text-lg font-bold transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(233,69,96,0.4)] text-center uppercase tracking-widest"
            >
              Elegir mi Caja
            </a>
            <a 
              href="#como-funciona" 
              class="bg-white/10 hover:bg-white/20 backdrop-blur-md text-white px-10 py-5 rounded-full text-lg font-bold transition-all text-center uppercase tracking-widest"
            >
              Cómo Funciona
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Products -->
    <section id="cajas" class="py-24 container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
        <div>
          <h2 class="text-4xl md:text-5xl font-bold mb-4">Nuestras <span class="text-accent">Ediciones</span></h2>
          <p class="text-gray-400 max-w-md">Seleccionamos las mejores camisetas del mundo para sorprenderte.</p>
        </div>
        <div class="h-[2px] flex-grow bg-gray-800 mx-8 hidden md:block"></div>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
        {products.map((product) => (
          <div class="group relative bg-[#0a0a0f] rounded-3xl overflow-hidden border border-white/5 hover:border-accent/40 transition-all duration-500 hover:shadow-[0_0_50px_rgba(233,69,96,0.15)] hover:-translate-y-2">
            
            {/* Image Container with Overlay */}
            <div class="relative h-64 overflow-hidden">
              <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-transparent to-transparent z-10"></div>
              <img 
                src={product.image} 
                alt={product.name}
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
              />
              <span class="absolute top-4 right-4 z-20 bg-accent/90 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider box-shadow-lg">
                Mystery Box
              </span>
            </div>

            <div class="p-8 relative z-20 -mt-12">
              <div class="mb-4">
                <h3 class="text-3xl font-bold mb-1 text-white group-hover:text-accent transition-colors">{product.name}</h3>
                <p class="text-gray-400 text-sm font-medium uppercase tracking-widest leading-relaxed h-10">{product.description}</p>
              </div>
              
              <div class="flex justify-between items-end pt-6 border-t border-white/5">
                <div>
                  <span class="block text-gray-500 text-[10px] uppercase tracking-widest font-bold mb-1">Precio</span>
                  <span class="text-2xl font-bold text-white tracking-tight">
                    ${product.price_clp.toLocaleString('es-CL')}
                  </span>
                </div>
                <a
                  href={`/checkout/${product.id}`}
                  class="bg-white text-black hover:bg-accent hover:text-white px-8 py-3 rounded-full font-bold transition-all hover:scale-105 active:scale-95 uppercase text-xs tracking-widest shadow-lg hover:shadow-accent/40"
                >
                  Comprar
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- Steps -->
    <section id="como-funciona" class="py-24 bg-[#0a0a1a]/50 backdrop-blur-sm">
      <div class="container mx-auto px-4">
        <h2 class="text-4xl md:text-5xl font-bold text-center mb-20 text-accent-secondary">CÓMO FUNCIONA EL MISTERIO</h2>
        
        <div class="grid md:grid-cols-3 gap-12 relative">
          <!-- Connectors -->
          <div class="hidden md:block absolute top-[20%] left-[25%] right-[25%] h-[2px] bg-gradient-to-r from-transparent via-accent-secondary/30 to-transparent"></div>
          
          <div class="text-center relative">
            <div class="w-20 h-20 bg-accent-secondary/10 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-accent-secondary/20 group-hover:scale-110 transition-transform">
              <span class="text-4xl font-bold text-accent-secondary">01</span>
            </div>
            <h3 class="text-2xl font-bold mb-4 uppercase tracking-tighter">Indica tu Talla</h3>
            <p class="text-gray-400 max-w-[250px] mx-auto text-sm leading-relaxed">Personaliza tu pedido eligiendo tu talla ideal para un calce perfecto.</p>
          </div>

          <div class="text-center">
            <div class="w-20 h-20 bg-accent-secondary/10 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-accent-secondary/20">
              <span class="text-4xl font-bold text-accent-secondary">02</span>
            </div>
            <h3 class="text-2xl font-bold mb-4 uppercase tracking-tighter">Evita Equipos</h3>
            <p class="text-gray-400 max-w-[250px] mx-auto text-sm leading-relaxed">¿Hay equipos que no quieres recibir? Indícalo y los excluiremos de tu caja.</p>
          </div>

          <div class="text-center">
            <div class="w-20 h-20 bg-accent-secondary/10 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-accent-secondary/20">
              <span class="text-4xl font-bold text-accent-secondary">03</span>
            </div>
            <h3 class="text-2xl font-bold mb-4 uppercase tracking-tighter">¡Unboxing!</h3>
            <p class="text-gray-400 max-w-[250px] mx-auto text-sm leading-relaxed">Recibe tu caja sorpresa y descubre la joya futbolística que te ha tocado.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-20 border-t border-gray-900 bg-[#05050a]">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center gap-10">
          <div class="flex items-center gap-2 grayscale brightness-200 opacity-50">
             <img src="/logo.png" alt="CamisetaBox Logo" class="h-8 w-auto" />
             <span class="text-xl font-bold">CAMISETA<span class="text-accent">BOX</span></span>
          </div>
          <div class="flex flex-wrap justify-center gap-8 text-xs font-bold uppercase tracking-widest text-gray-500">
            <a href="/terminos" class="hover:text-white transition-colors">Términos</a>
            <a href="/privacidad" class="hover:text-white transition-colors">Privacidad</a>
            <a href="mailto:contacto@camisetabox.cl" class="hover:text-white transition-colors">Soporte</a>
          </div>
          <p class="text-[10px] text-gray-700 uppercase tracking-widest font-bold">
            &copy; 2026 CamisetaBox. Todos los derechos reservados.
          </p>
        </div>
      </div>
    </footer>
  </main>
</Layout>
